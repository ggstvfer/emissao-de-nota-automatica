{
	"annotations": {"list": [{"builtIn": 1, "type": "dashboard", "name": "Annotations & Alerts", "hide": true, "enable": true}]},
	"editable": true,
	"fiscalYearStartMonth": 0,
	"graphTooltip": 0,
	"links": [],
	"liveNow": false,
	"panels": [
		{"type": "stat","title": "App Live","datasource": {"type": "prometheus", "uid": "prometheus"},"targets": [{"expr": "app_live", "refId": "A"}],"options": {"reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "orientation": "auto"},"gridPos": {"h": 4, "w": 4, "x": 0, "y": 0}},
		{"type": "stat","title": "App Ready","datasource": {"type": "prometheus", "uid": "prometheus"},"targets": [{"expr": "app_ready", "refId": "A"}],"options": {"reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}},"gridPos": {"h": 4, "w": 4, "x": 4, "y": 0}},
		{"type": "stat","title": "DB Up","datasource": {"type": "prometheus", "uid": "prometheus"},"targets": [{"expr": "db_up", "refId": "A"}],"options": {"reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}},"gridPos": {"h": 4, "w": 4, "x": 8, "y": 0}},
		{"type": "timeseries","title": "Latency p95 by route","datasource": {"type": "prometheus", "uid": "prometheus"},"targets": [{"expr": "histogram_quantile(0.95, sum by (le, method, route) (rate(http_request_duration_seconds_by_route_bucket[5m])))", "legendFormat": "{{method}} {{route}}", "refId": "A"}],"gridPos": {"h": 8, "w": 12, "x": 12, "y": 0}},
		{"type": "timeseries","title": "Requests in flight","datasource": {"type": "prometheus", "uid": "prometheus"},"targets": [{"expr": "sum by (method, route) (http_requests_in_flight)", "legendFormat": "{{method}} {{route}}", "refId": "A"}],"gridPos": {"h": 8, "w": 12, "x": 0, "y": 4}},
		{"type": "timeseries","title": "Event loop lag (mean/max)","datasource": {"type": "prometheus", "uid": "prometheus"},"targets": [{"expr": "nodejs_eventloop_lag_seconds{stat=\"mean\"}", "legendFormat": "mean", "refId": "A"},{"expr": "nodejs_eventloop_lag_seconds{stat=\"max\"}", "legendFormat": "max", "refId": "B"}],"gridPos": {"h": 8, "w": 12, "x": 12, "y": 8}},
		{"type": "timeseries","title": "RPS (by route)","datasource": {"type": "prometheus", "uid": "prometheus"},"targets": [{"expr": "sum by (method, route) (rate(http_requests_total[5m]))", "legendFormat": "{{method}} {{route}}", "refId": "A"}],"gridPos": {"h": 8, "w": 12, "x": 0, "y": 12}},
		{"type": "timeseries","title": "Memory (RSS & Heap)","datasource": {"type": "prometheus", "uid": "prometheus"},"targets": [{"expr": "process_resident_memory_bytes", "legendFormat": "rss", "refId": "A"},{"expr": "process_heap_used_bytes", "legendFormat": "heap", "refId": "B"}],"gridPos": {"h": 8, "w": 12, "x": 12, "y": 16}}
	],
	"schemaVersion": 39,
	"style": "dark",
	"tags": ["nfse", "node", "fastify"],
	"templating": {"list": []},
	"time": {"from": "now-6h", "to": "now"},
	"timepicker": {},
	"timezone": "",
	"title": "NFSe SP Service",
	"uid": "nfse-sp-service"
}
